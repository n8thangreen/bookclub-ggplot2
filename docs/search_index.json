[["index.html", "ggplot2: Elegant Graphics for Data Analysis (3e) Book Club Welcome", " ggplot2: Elegant Graphics for Data Analysis (3e) Book Club ICON book club 2025-02-03 Welcome Welcome to the ggplot2: Elegant Graphics for Data Analysis (3e) book club! This website is a companion for the book ggplot2: Elegant Graphics for Data Analysis (3e) by Hadley Wickham. This companion follows the Data Science Learning Community Code of Conduct. "],["book-club-meetings.html", "Book club meetings", " Book club meetings Each week, a volunteer will present a chapter from the book (or part of a chapter). This is the best way to learn the material! Presentations will usually consist of a review of the material, a discussion, and/or a demonstration of the principles presented in that chapter. More information about how to present is available in the github repo. Presentations will be recorded, and will be available on the ICON local drive. "],["pace.html", "Pace", " Pace We’ll try to cover 1 chapter/week, but… …It’s ok to split chapters when they feel like too much. We will try to meet every week, but will likely take some breaks for holidays, etc. "],["first-steps.html", "Chapter 1 First steps", " Chapter 1 First steps Learning objectives: The foundations of ggplot Useful “recipes” Fuel economy data use "],["mapping-components.html", "Mapping components", " Mapping components Layer Scale Coord Facet Theme "],["other-r-graphics.html", "Other R graphics", " Other R graphics Base R grid lattice htmlwidgets plotly "],["fuel-economy-data.html", "Fuel economy data", " Fuel economy data 1.0.1 Exercises library(dplyr) library(ggplot2) List five functions that you could use to get more information about the mpg dataset. summary, table, mean, sd, var, quantile, max, min, range, ncol, is.na … How can you find out what other datasets are included with ggplot2? data(package = \"ggplot2\") Data sets in package ‘ggplot2’: diamonds Prices of over 50,000 round cut diamonds economics US economic time series economics_long US economic time series faithfuld 2d density estimate of Old Faithful data luv_colours &#39;colors()&#39; in Luv space midwest Midwest demographics mpg Fuel economy data from 1999 to 2008 for 38 popular models of cars msleep An updated and expanded version of the mammals sleep dataset presidential Terms of 12 presidents from Eisenhower to Trump seals Vector field of seal movements txhousing Housing sales in TX Apart from the US, most countries use fuel consumption (fuel consumed over fixed distance) rather than fuel economy (distance travelled with fixed amount of fuel). How could you convert cty and hwy into the European standard of l/100km? mpg %&gt;% mutate(cgp100km = 2.35/cty*100, hgp100km = 235 / hwy) Which manufacturer has the most models in this dataset? mpg %&gt;% count(manufacturer) %&gt;% arrange(desc(n)) ## # A tibble: 15 × 2 ## manufacturer n ## &lt;chr&gt; &lt;int&gt; ## 1 dodge 37 ## 2 toyota 34 ## 3 volkswagen 27 ## 4 ford 25 ## 5 chevrolet 19 ## 6 audi 18 ## 7 hyundai 14 ## 8 subaru 14 ## 9 nissan 13 ## 10 honda 9 ## 11 jeep 8 ## 12 pontiac 5 ## 13 land rover 4 ## 14 mercury 4 ## 15 lincoln 3 mpg |&gt; group_by(manufacturer) |&gt; summarise(n = n()) |&gt; filter(n == max(n)) ## # A tibble: 1 × 2 ## manufacturer n ## &lt;chr&gt; &lt;int&gt; ## 1 dodge 37 tapply(mpg$manufacturer, INDEX = mpg$manufacturer, FUN = length) |&gt; # which.max() sort() |&gt; tail(1) ## dodge ## 37 Which model has the most variations? mpg %&gt;% count(model) %&gt;% arrange(desc(n)) ## # A tibble: 38 × 2 ## model n ## &lt;chr&gt; &lt;int&gt; ## 1 caravan 2wd 11 ## 2 ram 1500 pickup 4wd 10 ## 3 civic 9 ## 4 dakota pickup 4wd 9 ## 5 jetta 9 ## 6 mustang 9 ## 7 a4 quattro 8 ## 8 grand cherokee 4wd 8 ## 9 impreza awd 8 ## 10 a4 7 ## # ℹ 28 more rows Does your answer change if you remove the redundant specification of drive train (e.g. “pathfinder 4wd”, “a4 quattro”) from the model name? mpg %&gt;% mutate(model = sub(&quot; 4wd&quot;, &quot;&quot;, model), model = sub(&quot; awd&quot;, &quot;&quot;, model), model = sub(&quot; 2wd&quot;, &quot;&quot;, model), model = sub(&quot; quattro&quot;, &quot;&quot;, model) ) %&gt;% count(model) %&gt;% arrange(desc(n)) ## # A tibble: 37 × 2 ## model n ## &lt;chr&gt; &lt;int&gt; ## 1 a4 15 ## 2 caravan 11 ## 3 ram 1500 pickup 10 ## 4 civic 9 ## 5 dakota pickup 9 ## 6 jetta 9 ## 7 mustang 9 ## 8 grand cherokee 8 ## 9 impreza 8 ## 10 camry 7 ## # ℹ 27 more rows "],["key-components.html", "Key components", " Key components three key components of a ggplot2 plot data aesthetics geom e.g. ggplot(data = mpg, aes(displ, hwy)) + geom_point() ggplot() + geom_point(data = mpg, aes(x = displ, y = hwy)) ggplot() + geom_point(data = mpg, mapping = aes(x = displ, y = hwy)) ggplot() + geom_point(data = mpg, mapping = aes(x = displ, y = hwy)) ggplot(data = midwest) + geom_point(data = mpg, aes(x = displ, y = hwy)) "],["exercises-1.html", "Exercises", " Exercises ggplot(mpg, aes(x = cty, y = hwy)) + geom_point() directly correlated issues discrete measurements overplotting scale ggplot(mpg, aes(model, manufacturer)) + geom_point() This plot maps model (specific car models) to the x-axis and manufacturer to the y-axis. Each point represents one observation in the dataset. usefulness both variables are categorical no natural order cluttered informative aggregate reorder facet ggplot(mpg, aes(cty, hwy)) + geom_point() ggplot(diamonds, aes(carat, price)) + geom_point() ggplot(economics, aes(date, unemploy)) + geom_line() ggplot(mpg, aes(cty)) + geom_histogram() ## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`. "],["colour-size-shape-and-other-aesthetic-attributes.html", "Colour, size, shape and other aesthetic attributes", " Colour, size, shape and other aesthetic attributes ggplot2 takes care of the details of converting data (e.g., ‘f’, ‘r’, ‘4’) into aesthetics (e.g., ‘red’, ‘yellow’, ‘green’) with a scale. ggplot(mpg, aes(displ, hwy, colour = class)) + geom_point() no ‘scaling’ ggplot(mpg, aes(displ, hwy)) + geom_point(colour = &quot;blue&quot;) ggplot(mpg, aes(displ, hwy)) + geom_point(aes(colour = &quot;blue&quot;)) the second plots doesn’t have a legend think about how to colour tell a story less is more! "],["exercises-2.html", "Exercises", " Exercises map to continuous values gradient scale ggplot(mpg, aes(cty, hwy, colour = displ)) + geom_point() categorical variable unique colour ggplot(mpg, aes(cty, hwy, colour = class)) + geom_point() more than one aesthetic ggplot(mpg, aes(cty, hwy, colour = class, size = displ)) + geom_point() throw error shapes discrete ggplot(mpg, aes(cty, hwy, shape = displ)) + geom_point() ggplot(mpg, aes(cty, hwy, shape = trans)) + geom_point() ## Warning: The shape palette can deal with a maximum of 6 discrete values because more than 6 becomes difficult to discriminate ## ℹ you have requested 10 values. Consider specifying shapes manually if you need that many have them. ## Warning: Removed 96 rows containing missing values or values outside the scale range (`geom_point()`). 6 shapes used but need 10 "],["facets.html", "Facets", " Facets Facets are a way of splitting a plot into multiple panels based on the values of a variable. grid and wrapped when to use this vs aesthetics? ggplot(mpg, aes(displ, hwy)) + geom_point() + facet_wrap(~class) Exercises divides in to bins ggplot(mpg, aes(displ, cty)) + geom_point() + facet_wrap(~ hwy) ggplot(mpg, aes(displ, cty)) + geom_point() + facet_wrap(~ cyl) ggplot(mpg, aes(displ, cty)) + geom_point() + facet_wrap(~ cyl) no. cyclinders increase -&gt; bigger engines, more fuel consumption ggplot(mpg, aes(displ, cty)) + geom_point() + facet_wrap(~ class, nrow = 2, ncol = 4) ggplot(mpg, aes(displ, cty)) + geom_point() + facet_wrap(~ class, nrow = 2) The scales argument controls whether the axes in the facets are fixed or allowed to vary independently. Options: fixed (default): All facets share the same x and y-axis scales. free_x: Each facet has its own x-axis scale. free_y: Each facet has its own y-axis scale. free: Each facet has its own x and y-axis scales. use when scale are different/the same ggplot(mpg, aes(displ, cty)) + geom_point() + facet_wrap(~ class, scales = &quot;free&quot;) "],["plot-geoms.html", "Plot geoms", " Plot geoms Adding smoothers ggplot(mpg, aes(displ, hwy)) + geom_point() + geom_smooth() ## `geom_smooth()` using method = &#39;loess&#39; and formula = &#39;y ~ x&#39; #&gt; `geom_smooth()` using method = &#39;loess&#39; and formula = &#39;y ~ x&#39; Turn off confidence interval ggplot(mpg, aes(displ, hwy)) + geom_point() + geom_smooth(se = FALSE) ## `geom_smooth()` using method = &#39;loess&#39; and formula = &#39;y ~ x&#39; Wiggly ggplot(mpg, aes(displ, hwy)) + geom_point() + geom_smooth(span = 0.2) ## `geom_smooth()` using method = &#39;loess&#39; and formula = &#39;y ~ x&#39; Smooth ggplot(mpg, aes(displ, hwy)) + geom_point() + geom_smooth(span = 1) ## `geom_smooth()` using method = &#39;loess&#39; and formula = &#39;y ~ x&#39; Animate through span values library(ggplot2) library(gganimate) library(dplyr) span_values &lt;- seq(0.1, 1, by = 0.1) create_loess_data &lt;- function(span) { # apply loess smoothing with the current span value loess_model &lt;- loess(hwy ~ displ, data = mpg, span = span) # Create a data frame with the fitted values from the loess model smoothed &lt;- data.frame( displ = mpg$displ, hwy = mpg$hwy, fitted = predict(loess_model), span = span ) return(smoothed) } # calculate smoothed data for each span value using loess smoothed_data &lt;- bind_rows( lapply(span_values, FUN = create_loess_data) ) # use precomputed data p &lt;- ggplot(smoothed_data, aes(displ, hwy)) + geom_point() + geom_line(aes(y = fitted, group = span, color = factor(span)), linewidth = 2) + transition_manual(span) + # animate over the span values labs(title = &quot;Loess Smoothing with span = {current_frame}&quot;, x = &quot;Displacement&quot;, y = &quot;Highway MPG&quot;) # render animation animate(p, nframes = length(span_values), duration = 5, width = 600, height = 400) ?loess library(mgcv) library(MASS) ggplot(mpg, aes(displ, hwy)) + geom_point() + geom_smooth(se = FALSE, color = &quot;black&quot;) + geom_smooth(method = &quot;gam&quot;, formula = y ~ s(x), color = &quot;blue&quot;, se = FALSE) + # GAM smoothing geom_smooth(method = &quot;lm&quot;, color = &quot;red&quot;, se = FALSE) + # Linear regression geom_smooth(method = &quot;rlm&quot;, color = &quot;darkgreen&quot;, se = FALSE) ## `geom_smooth()` using method = &#39;loess&#39; and formula = &#39;y ~ x&#39; ## `geom_smooth()` using formula = &#39;y ~ x&#39; ## `geom_smooth()` using formula = &#39;y ~ x&#39; Box plots ggplot(mpg, aes(drv, hwy)) + geom_point() ggplot(mpg, aes(drv, hwy)) + geom_jitter() ggplot(mpg, aes(drv, hwy)) + geom_boxplot() ggplot(mpg, aes(drv, hwy)) + geom_violin() ggplot(mpg, aes(drv, hwy, col = drv)) + geom_boxplot() + geom_jitter() + theme(legend.position = &quot;none&quot;) # remove legend 1.0.2 Histograms and frequency polygons ggplot(mpg, aes(hwy)) + geom_histogram() ## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`. #&gt; `stat_bin()` using `bins = 30`. Pick better value with `binwidth`. ggplot(mpg, aes(hwy)) + geom_freqpoly() ## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`. #&gt; `stat_bin()` using `bins = 30`. Pick better value with `binwidth`. Interactively change binwidth library(manipulate) manipulate( ggplot(mpg, aes(hwy)) + geom_freqpoly(binwidth = binwidth) + labs(title = paste(&quot;Histogram with binwidth =&quot;, binwidth), x = &quot;Highway MPG&quot;, y = &quot;Frequency&quot;), binwidth = slider(0.5, 7, step = 0.1, initial = 2.5) ) 1.0.3 Bar charts ggplot(mpg, aes(manufacturer)) + geom_bar() Rotate x-axis labels ggplot(mpg, aes(manufacturer)) + geom_bar() + theme(axis.text.x = element_text(angle = 45, hjust = 1)) # rotate x-axis labels Vary placement of x-axis labels ggplot(mpg, aes(manufacturer)) + geom_bar() + theme(axis.text.x = element_text(angle = 90, hjust = 0)) # rotate x-axis labels "],["exercises-4.html", "Exercises", " Exercises ggplot(mpg, aes(cty, hwy)) + geom_jitter() ggplot(mpg, aes(class, hwy)) + geom_boxplot() ggplot(mpg, aes(reorder(class, hwy), hwy)) + geom_boxplot() By default, reorder() sorts the factor levels by the median The weight aesthetic in geom_bar() allows you to specify the weight or frequency for each observation ggplot(mpg, aes(x = class, weight = cty)) + geom_bar() ggplot(mpg, aes(x = model, fill = manufacturer)) + geom_bar(position = &quot;dodge&quot;) library(dplyr) # summarized data frame summary_data &lt;- mpg %&gt;% count(trans, class) # heatmap-like plot using geom_tile ggplot(summary_data, aes(x = trans, y = class)) + geom_tile(aes(fill = n), width = 1, height = 1) ggplot(summary_data, aes(x = trans, y = class)) + geom_tile(aes(fill = n), width = 1, height = 1) + scale_fill_viridis_c() "],["meeting-videos.html", "Meeting Videos", " Meeting Videos Cohort 1 Meeting chat log LOG "],["individual-geoms.html", "Chapter 2 Individual geoms", " Chapter 2 Individual geoms Learning objectives: "],["introduction.html", "Introduction", " Introduction This document explores the fundamental geoms in ggplot2, which serve as building blocks for visualizations. These geoms require x and y aesthetics and generally understand color, size, and sometimes fill. "],["fundamental-geoms.html", "Fundamental Geoms", " Fundamental Geoms Area Plot ggplot(mpg, aes(x, y)) + geom_area(fill = &quot;lightblue&quot;, color = &quot;black&quot;) + ggtitle(&quot;Area Plot&quot;) Bar Chart ggplot(df, aes(x, y)) + geom_bar(stat = &quot;identity&quot;, fill = &quot;blue&quot;) + ggtitle(&quot;Bar Chart&quot;) Line Plot ggplot(df, aes(x, y)) + geom_line(color = &quot;red&quot;) + ggtitle(&quot;Line Plot&quot;) Scatterplot ggplot(df, aes(x, y)) + geom_point(size = 3, color = &quot;purple&quot;) + ggtitle(&quot;Scatterplot&quot;) Polygon Plot ggplot(df, aes(x, y)) + geom_polygon(fill = &quot;lightgreen&quot;, color = &quot;black&quot;) + ggtitle(&quot;Polygon Plot&quot;) Tile Plot ggplot(df, aes(x, y)) + geom_tile(fill = &quot;orange&quot;) + ggtitle(&quot;Tile Plot&quot;) Text Annotation ggplot(df, aes(x, y, label = label)) + geom_text(size = 5, color = &quot;black&quot;) + ggtitle(&quot;Text Plot&quot;) "],["exercises-5.html", "Exercises", " Exercises What geoms would you use to draw each of the following plots? Scatterplot: geom_point() Line Chart: geom_line() Histogram: geom_histogram() Bar Chart: geom_bar(stat = \"identity\") Pie Chart: geom_bar(width = 1, stat = \"identity\") + coord_polar(theta = \"y\") Differences between geom_path() and geom_polygon() geom_path() connects points in the order they appear. geom_polygon() connects points and closes the shape by linking the last point back to the first. Differences between geom_path() and geom_line() geom_line() connects points in order of x values. geom_path() follows the exact order of points in the dataset. Low-level geoms used in composite geoms geom_smooth(): Uses geom_line() and geom_ribbon(). geom_boxplot(): Uses geom_segment() and geom_rect(). geom_violin(): Uses geom_density_ridges(). "],["meeting-videos-1.html", "Meeting Videos", " Meeting Videos Cohort 1 Meeting chat log LOG "],["collective-geoms.html", "Chapter 3 Collective geoms", " Chapter 3 Collective geoms Learning objectives: "],["packages.html", "Packages", " Packages "],["getting-help.html", "Getting help", " Getting help "],["meeting-videos-2.html", "Meeting Videos", " Meeting Videos Cohort 1 Meeting chat log LOG "],["statistical-summaries.html", "Chapter 4 Statistical summaries", " Chapter 4 Statistical summaries Learning objectives: "],["section-4.html", "?", " ? "],["meeting-videos-3.html", "Meeting Videos", " Meeting Videos Cohort 1 Meeting chat log LOG "],["maps.html", "Chapter 5 Maps", " Chapter 5 Maps Learning objectives: "],["section-5.html", "?", " ? "],["meeting-videos-4.html", "Meeting Videos", " Meeting Videos Cohort 1 Meeting chat log LOG "],["networks.html", "Chapter 6 Networks", " Chapter 6 Networks Learning objectives: "],["section-6.html", "?", " ? "],["meeting-videos-5.html", "Meeting Videos", " Meeting Videos Cohort 1 Meeting chat log LOG "],["annotations.html", "Chapter 7 Annotations", " Chapter 7 Annotations Learning objectives: "],["section-7.html", "?", " ? "],["meeting-videos-6.html", "Meeting Videos", " Meeting Videos Cohort 1 Meeting chat log LOG "],["arranging-plots.html", "Chapter 8 Arranging plots", " Chapter 8 Arranging plots Learning objectives: "],["section-8.html", "?", " ? "],["meeting-videos-7.html", "Meeting Videos", " Meeting Videos Cohort 1 Meeting chat log LOG "],["position-scales-and-axes.html", "Chapter 9 Position scales and axes", " Chapter 9 Position scales and axes Learning objectives: "],["section-9.html", "?", " ? "],["meeting-videos-8.html", "Meeting Videos", " Meeting Videos Cohort 1 Meeting chat log LOG "],["colour-scales-and-legends.html", "Chapter 10 Colour scales and legends", " Chapter 10 Colour scales and legends Learning objectives: "],["section-10.html", "?", " ? "],["meeting-videos-9.html", "Meeting Videos", " Meeting Videos Cohort 1 Meeting chat log LOG "],["other-aesthetics.html", "Chapter 11 Other aesthetics", " Chapter 11 Other aesthetics Learning objectives: "],["section-11.html", "?", " ? "],["meeting-videos-10.html", "Meeting Videos", " Meeting Videos Cohort 1 Meeting chat log LOG "],["template.html", "Chapter 12 TEMPLATE", " Chapter 12 TEMPLATE Learning objectives: THESE ARE NICE TO HAVE BUT NOT ABSOLUTELY NECESSARY "],["slide-1.html", "SLIDE 1", " SLIDE 1 ADD SLIDES AS SECTIONS (##). TRY TO KEEP THEM RELATIVELY SLIDE-LIKE; THESE ARE NOTES, NOT THE BOOK ITSELF. "],["meeting-videos-11.html", "Meeting Videos", " Meeting Videos Cohort 1 Meeting chat log LOG "]]
